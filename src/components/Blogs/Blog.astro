---
import { useTranslations } from "../../i18n/util";
import { languages } from "../../i18n/ui";
const currentLang = Astro.currentLocale || "es";
const translateLabels = useTranslations(currentLang as keyof typeof languages);
import "./Blog.css";
import { getCollection } from "astro:content";
import BlogsCards from "../BlogCards/BlogsCards.astro";
import BlogsModals from "../BlogsModals/BlogsModals.astro";
const allBlogs = await getCollection("blogs", ({ data }) => {
  return data.lang === currentLang;
});

const sortedBlogs = allBlogs.sort(
  (a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
);
---

<section id="blogs">
  <div class="blog-container">
    <div class="blue-background animate-scroll"></div>
    <h1 class="animate-scroll">{translateLabels("blog.title")}</h1>
    <div class="swiper SwiperBlog animate-scroll">
      <div class="blogs-container swiper-wrapper">
        {
          sortedBlogs.map((blog, index) => (
            <div class="swiper-slide">
              <div
                class="blog-card-wrapper animate-scroll"
                style={`animation-delay: ${index * 0.12}s`}
              >
                <BlogsCards blog={blog} lang={currentLang} />
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </div>
  <BlogsModals />
</section>

<script src="./Blog.js"></script>
