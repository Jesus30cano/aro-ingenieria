---
import { useTranslations } from "../../i18n/util";
import type { languages } from "../../i18n/ui";
import "./CardProjects.css";

interface Props {
  title: string;
  description: string;
  client: string;
  images: { src: string; alt: string }[];
  projectId: string;
}

const currentLang = Astro.currentLocale || "es";
const translateLabels = useTranslations(currentLang as keyof typeof languages);

const { title, description, images = [], client } = Astro.props;

// Imagen aleatoria (se mantiene tu lógica original)
let randomImageSrc = "";
let randomImageAlt = "";

if (images.length > 0) {
  const randomIndex = Math.floor(Math.random() * images.length);
  const selectedImage = images[randomIndex];
  randomImageSrc = selectedImage.src;
  randomImageAlt = selectedImage.alt;
}
---

<div class="project-card">
  <!-- Imagen -->
  <div class="project-image-container">
    <figure>
      <img
        src={randomImageSrc}
        alt={randomImageAlt}
        class="project-image"
        loading="lazy"
      />
    </figure>

    <!-- Badge de modelo -->
    <span class="image-counter">Modelo de Atención</span>
  </div>

  <!-- Contenido -->
  <div class="project-content">
    <!-- Etiqueta superior -->
    <div class="project-client">
      {client || translateLabels("project.title")}
    </div>

    <!-- Título -->
    <h2 class="project-title">{title}</h2>

    <!-- Descripción -->
    <p class="project-description">{description}</p>
  </div>
</div>
